# Валидация формы бронирования (ReserveInfo)

## Описание

В компонент `ReserveInfo` добавлена валидация с использованием **Zod** и **react-hook-form**.

## Схема валидации

### Обязательные поля

1. **Период бронирования (date)**

    - Тип: массив из двух дат `[Date, Date]`
    - Правило: дата начала должна быть меньше или равна дате окончания
    - Сообщение: "Дата начала должна быть меньше или равна дате окончания"

2. **Название отеля (hotel_id)**

    - Тип: объект `{ id: string, label: string }`
    - Правило: id не должен быть пустой строкой
    - Сообщение: "Отель обязателен для заполнения"

3. **Номер (room_id)**

    - Тип: объект `{ id: string, label: string }`
    - Правило: id не должен быть пустой строкой
    - Сообщение: "Номер обязателен для заполнения"

4. **Стоимость номера (price)**

    - Тип: number (с автоматическим преобразованием из строки через `z.coerce`)
    - Правила:
        - Обязательное поле
        - Должно быть положительным числом (> 0)
    - Сообщения:
        - "Стоимость обязательна для заполнения"
        - "Стоимость должна быть числом"
        - "Стоимость должна быть больше 0"

5. **Количество человек (quantity)**

    - Тип: number (с автоматическим преобразованием из строки через `z.coerce`)
    - Правила:
        - Обязательное поле
        - Должно быть положительным целым числом
    - Сообщения:
        - "Количество гостей обязательно для заполнения"
        - "Количество должно быть числом"
        - "Количество гостей должно быть больше 0"
        - "Количество гостей должно быть целым числом"

6. **ФИО гостя (guest)**

    - Тип: string
    - Правила:
        - Минимум 2 символа
        - Только буквы (кириллица/латиница), пробелы и дефисы
    - Сообщения:
        - "ФИО гостя должно содержать минимум 2 символа"
        - "ФИО может содержать только буквы, пробелы и дефисы"

7. **Номер гостя (phone)**
    - Тип: string
    - Правила:
        - Обязательное поле
        - Формат: `+7(XXX)XXX-XX-XX`
    - Сообщения:
        - "Номер телефона обязателен для заполнения"
        - "Введите корректный номер телефона"

### Необязательные поля

1. **Комментарии (comment)**

    - Тип: string (опционально)
    - Правила: нет

2. **Предоплата (prepayment)**

    - Тип: number (с автоматическим преобразованием, опционально)
    - Правила: нет
    - По умолчанию: 0

3. **Служебные поля**
    - `created_by` - кто создал
    - `edited_by` - кто изменил
    - `created_at` - дата создания
    - `edited_at` - дата изменения

## Режим валидации

- **Режим:** `onChange` - валидация происходит при изменении полей
- **Resolver:** `zodResolver` для интеграции Zod с react-hook-form

## Использование

```tsx
const form = useForm<ReserveForm>({
    resolver: zodResolver(reserveFormSchema),
    mode: 'onChange',
    defaultValues: currentReserve?.hotel ? getDefaultValues(currentReserve) : undefined,
});
```

## Обработка ошибок

- При успешной валидации вызывается `onAcceptForm`
- При ошибке валидации вызывается `onError`, который показывает уведомление: "Заполните все обязательные поля"
- Ошибки отображаются под каждым полем в виде красного текста

## Особенности

1. **Автоматическое преобразование типов** - используется `z.coerce` для автоматического преобразования строк в числа для полей `price`, `quantity` и `prepayment`

2. **Соответствие типам** - схема Zod строго соответствует типу `ReserveForm` благодаря `satisfies z.ZodType<ReserveForm>`

3. **Сохранение логики** - вся существующая бизнес-логика компонента сохранена без изменений

## Пример сообщений об ошибках

```typescript
// Отель не выбран
'Отель обязателен для заполнения';

// Стоимость = 0 или отрицательная
'Стоимость должна быть больше 0';

// ФИО содержит цифры
'ФИО может содержать только буквы, пробелы и дефисы';

// Неверный формат телефона
'Введите корректный номер телефона';
```

## Зависимости

- `zod` - библиотека схем валидации
- `@hookform/resolvers/zod` - интеграция Zod с react-hook-form
- `react-hook-form` - управление формами
