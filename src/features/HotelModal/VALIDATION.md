# Валидация формы отеля (HotelInfo)

## Описание

В компонент `HotelInfo` добавлена валидация с использованием **Zod** и **react-hook-form**.

## Схема валидации

### Обязательные поля

1. **Название отеля (title)**

    - Тип: string
    - Правило: минимум 1 символ
    - Сообщение: "Название отеля обязательно для заполнения"

2. **Тип отеля (type)**

    - Тип: объект `{ id: string, label: string }`
    - Правило: обязательное поле
    - Сообщение: "Тип отеля обязателен для заполнения"

3. **Отельер (user_id)**

    - Тип: объект `{ id: string, label: string }`
    - Правило: обязательное поле
    - Сообщение: "Отельер обязателен для заполнения"

4. **Адрес (address)**

    - Тип: string
    - Правило: минимум 1 символ
    - Сообщение: "Адрес обязателен для заполнения"

5. **Номер телефона (phone)**
    - Тип: string
    - Правила:
        - Обязательное поле
        - Формат: `+7(XXX)XXX-XX-XX`
    - Сообщения:
        - "Номер телефона обязателен для заполнения"
        - "Введите корректный номер телефона"

### Необязательные поля

1. **ID отеля (id)**

    - Тип: string (опционально)
    - Используется при редактировании существующего отеля

2. **Рейтинг (rating)**

    - Тип: string (опционально)
    - По умолчанию: "5"

3. **Город (city)**

    - Тип: объект `{ id: string, label: string }` (опционально)
    - Правило: нет

4. **Ссылка на Telegram (telegram_url)**

    - Тип: string (опционально)
    - По умолчанию: "https://t.me/"

5. **Описание (description)**

    - Тип: string (опционально)
    - Комментарии к отелю

6. **Изображение (image_id)**

    - Тип: `{ id: string, file: File }` или null (опционально)
    - Фото отеля

7. **Пляж (beach)**

    - Тип: объект `{ id: string, label: string }` (опционально)
    - Какой пляж рядом

8. **Расстояние до пляжа (beach_distance)**

    - Тип: объект `{ id: string, label: string }` (опционально)
    - Дистанция до пляжа

9. **Особенности (features)**

    - Тип: массив объектов `{ id: string, label: string }[]`
    - По умолчанию: `[]`
    - Особенности размещения (Wi-Fi, парковка и т.д.)

10. **Питание (eat)**
    - Тип: массив объектов `{ id: string, label: string }[]`
    - По умолчанию: `[]`
    - Варианты питания

## Режим валидации

- **Режим:** `onBlur` - валидация происходит при потере фокуса
- **Режим ревалидации:** `onBlur` - повторная валидация при потере фокуса
- **Resolver:** `zodResolver` для интеграции Zod с react-hook-form

## Использование

```tsx
const form = useForm<HotelFormSchema>({
    defaultValues: getInitialValue(currentReserve?.hotel),
    mode: 'onBlur',
    reValidateMode: 'onBlur',
    resolver: zodResolver(hotelFormSchema),
});
```

## Обработка ошибок

- При успешной валидации вызывается `onAcceptForm`, который сериализует данные и вызывает `onAccept`
- При ошибке валидации вызывается `onError`, который показывает уведомление: "Заполните все обязательные поля"
- Ошибки отображаются под каждым полем через компоненты `FormInput`, `FormSelect`, `FormTextarea`, `FormMultipleSelector`

## Особенности реализации

1. **Сериализация данных** - функция `deserializeData` преобразует данные формы в формат для API:

    - `type.label` → извлекается label из объекта
    - `rating` → преобразуется в число
    - `user_id.id` → извлекается id пользователя
    - `features` и `eat` → преобразуются в массивы строк (id)
    - `beach.id`, `beach_distance.id`, `city.id` → извлекаются id

2. **Инициализация формы** - функция `getInitialValue` преобразует данные отеля из API в формат формы:

    - Строковые поля преобразуются в объекты `{ id, label }`
    - Массивы строк преобразуются в массивы объектов
    - Устанавливаются значения по умолчанию

3. **Type Safety** - используются `@ts-expect-error` комментарии для обхода проблем вывода типов между Zod и React Hook Form

4. **Сохранение логики** - вся существующая бизнес-логика компонента сохранена без изменений

## Пример сообщений об ошибках

```typescript
// Отель не указан
'Название отеля обязательно для заполнения';

// Тип не выбран
'Тип отеля обязателен для заполнения';

// Адрес пустой
'Адрес обязателен для заполнения';

// Отельер не выбран
'Отельер обязателен для заполнения';

// Неверный формат телефона
'Введите корректный номер телефона';
```

## Зависимости

- `zod` - библиотека схем валидации
- `@hookform/resolvers/zod` - интеграция Zod с react-hook-form
- `react-hook-form` - управление формами

## Изменения от предыдущей версии

- ✅ Убраны все `rules` из Controller компонентов
- ✅ Валидация теперь полностью управляется схемой Zod
- ✅ Все тексты ошибок сохранены без изменений
- ✅ Основная логика компонента не изменена
- ✅ Добавлена валидация формата телефона через regex
